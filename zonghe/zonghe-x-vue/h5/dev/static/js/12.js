webpackJsonp([12],{"5kEa":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={inject:["refresh"],data:function(){return{userCount:0,moneyCount:"0.00",userList:[],sumCount:0,statLimit:0,currentPage:1,endLimit:20,formInline:{yearNumber:"",account:"",logno:"",money:"",status:"-1"},loading:!1,clearable:!1,rowKes:[],expandArray:[]}},created:function(){var t=new Date;this.formInline.yearNumber=t.getFullYear()+"",this.getCount(),this.getUserCount(0),this.handleCurrentChange=this.handleCurrentChange()},methods:{getCount:function(){var t=this;this.$http({url:this.$http.adornUrl("/inOrder/getCountDGroup"),method:"post",data:{yearNumber:this.formInline.yearNumber}}).then(function(e){var n=e.data;t.userCount=n.userCount,t.moneyCount=""==n.moneyCount?"0.00":n.moneyCount.toFixed(2)})},getUserCount:function(t){var e=this;this.loading=!0,0==t?this.currentPage=1:t=(this.currentPage-1)*this.endLimit,this.$http({url:this.$http.adornUrl("/inOrder/getAllUser"),method:"post",data:{account:this.formInline.account,logno:this.formInline.logno,money:this.formInline.money,status:this.formInline.status,stat:t,end:this.endLimit,yearNumber:this.formInline.yearNumber}}).then(function(t){var n=t.data;e.sumCount=n.sumCount,e.userList=n.userList,e.loading=!1})},delAllUser:function(){var t=this;this.$http({url:this.$http.adornUrl("/inOrder/delAllUserGroup"),method:"post",data:{yearNumber:this.formInline.yearNumber}}).then(function(e){var n=e.data;"删除失败"==n?t.$refs.Dialog.open(n,"erro"):(t.$refs.Dialog.open(n,"success"),t.refresh())})},handleCurrentChange:function(){var t=this;return this.$JsUtil.debounce(function(e){var n=(e-1)*t.endLimit;t.getUserCount(n)},500)},handleSizeChange:function(t){this.endLimit=t,this.getUserCount(0)},delUserGroup:function(t){var e=this;this.$http({url:this.$http.adornUrl("/inOrder/delUserGroup"),method:"post",data:{id:t,yearNumber:this.formInline.yearNumber}}).then(function(t){var n=t.data;"删除失败"==n?e.$refs.Dialog.open(n,"erro"):(e.$refs.Dialog.open(n,"success"),e.refresh())})},updateHtml:function(){this.getCount(),this.getUserCount(0)},getTextLognoLog:function(t){var e=this;this.$http({url:this.$http.adornUrl("/inOrder/getTextByLogno"),method:"post",data:{logno:t}}).then(function(t){var n=t.data;e.$alert("<div style='width:400px;height:300px;overflow: scroll;display: table-cell;text-align: left;white-space: pre-wrap;'>"+n+"</div>","回调",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",callback:function(t){}})})},clearSelect:function(){var t=(new Date).getFullYear();this.formInline={account:"",logno:"",money:"",status:"-1",yearNumber:t+""}},toggleRowExpansion:function(t,e){this.expandArray=[];var n=[];if(t.id!=this.rowKes[0]){for(var r=1;r<9;r++){var a=1==r?"":r;if(null===t["logno"+a]||""===t["logno"+a])break;var l={logno:t["logno"+a],supplierid:t["supplierid"+a],supplierStatus:t["supplierStatus"+a],qdordersn:t["qdordersn"+a]};n.push(l)}this.expandArray=n,this.rowKes=[],this.rowKes.push(t.id)}else this.rowKes=[]},consologDemo:function(t){console.log(t)}},components:{Dialog:n("r73Y").default}},a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v("\n      数据量："+t._s(t.userCount)+"，总金额："+t._s(t.moneyCount)+"￥ \n      "),n("el-button",{on:{click:function(e){t.delAllUser()}}},[t._v("删除全部数据")]),t._v(" "),n("el-button",{on:{click:function(e){t.updateHtml()}}},[t._v("刷新页面")]),t._v(" "),n("Dialog",{ref:"Dialog"}),t._v(" "),n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formInline}},[n("el-form-item",{attrs:{label:"表年份"}},[n("el-date-picker",{staticStyle:{width:"100px"},attrs:{type:"year",format:"yyyy","value-format":"yyyy",clearable:!1,align:"center",placeholder:"选择年"},model:{value:t.formInline.yearNumber,callback:function(e){t.$set(t.formInline,"yearNumber",e)},expression:"formInline.yearNumber"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"充值账户"}},[n("el-input",{staticStyle:{width:"130px"},attrs:{placeholder:"充值账户"},model:{value:t.formInline.account,callback:function(e){t.$set(t.formInline,"account",e)},expression:"formInline.account"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"流水号"}},[n("el-input",{staticStyle:{width:"130px"},attrs:{placeholder:"流水号"},model:{value:t.formInline.logno,callback:function(e){t.$set(t.formInline,"logno",e)},expression:"formInline.logno"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"金额"}},[n("el-input",{staticStyle:{width:"130px"},attrs:{placeholder:"金额"},model:{value:t.formInline.money,callback:function(e){t.$set(t.formInline,"money",e)},expression:"formInline.money"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"状态"}},[n("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"选择状态"},model:{value:t.formInline.status,callback:function(e){t.$set(t.formInline,"status",e)},expression:"formInline.status"}},[n("el-option",{attrs:{label:"--  --",value:""}}),t._v(" "),n("el-option",{attrs:{label:"充值中",value:"0"}}),t._v(" "),n("el-option",{attrs:{label:"充值成功",value:"1"}}),t._v(" "),n("el-option",{attrs:{label:"充值失败",value:"2"}})],1)],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.clearSelect()}}},[t._v("清空")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.getUserCount(0)}}},[t._v("查询")])],1)],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.userList,border:"",height:"60vh","row-key":"id","highlight-current-row":"","expand-row-keys":t.rowKes},on:{"expand-change":t.toggleRowExpansion}},[n("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{type:"expand"}},[[n("el-table",{staticStyle:{width:"760px"},attrs:{data:t.expandArray,border:""}},[n("el-table-column",{attrs:{prop:"logno",label:"流水号",width:"200",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"supplierid",label:"渠道id",width:"120",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"qdordersn",label:"供货商id",width:"120",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"supplierStatus",label:"渠道状态",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{type:0===e.row.supplierStatus?"primary":1===e.row.supplierStatus?"success":"danger","disable-transitions":""}},[t._v(t._s(0===e.row.supplierStatus?"充值中":1===e.row.supplierStatus?"充值成功":"充值失败"))])]}}])}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){t.consologDemo(e.row)}}},[t._v("打印")])]}}])})],1)]],2),t._v(" "),n("el-table-column",{attrs:{prop:"id",label:"ID",width:"80",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"account",label:"充值账户",width:"120",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"cashierid",label:"商户ID",width:"120",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"supplierid",label:"供货商ID",width:"120",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"goodsid",label:"产品ID",width:"120",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"productsn",label:"产品编号",width:"120",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"location",label:"策略ID",width:"120",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"logno",label:"平台流水",width:"250",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"money",label:"金额",width:"120",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"outLogno",label:"商户订单号",width:"120",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"status",label:"状态",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{type:0===e.row.status?"primary":1===e.row.status?"success":"danger","disable-transitions":""}},[t._v(t._s(0===e.row.status?"充值中":1===e.row.status?"充值成功":"充值失败"))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"createtime",label:"创建时间",width:"200",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"paytime",label:"完成时间",width:"200",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){t.handleClick(e.row)}}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){t.delUserGroup(e.row.id)}}},[t._v("删除")]),t._v(" "),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){t.getTextLognoLog(e.row.logno)}}},[t._v("回调")])]}}])})],1),t._v(" "),n("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[20,50,100,200],"page-size":t.endLimit,layout:"total, prev, pager, next,sizes",total:t.sumCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)},staticRenderFns:[]};var l=n("VU/8")(r,a,!1,function(t){n("9Lw5")},"data-v-fdb054fe",null);e.default=l.exports},"9Lw5":function(t,e,n){var r=n("isqB");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n("rjj0")("abb90d88",r,!0)},isqB:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n.el-row[data-v-fdb054fe] {\r\n    margin-bottom: 5px;\n}\n.el-row[data-v-fdb054fe] :last-child {\r\n      margin-bottom: 0;\n}\n.el-col[data-v-fdb054fe] {\r\n    border-radius: 4px;\n}\n.bg-purple-dark[data-v-fdb054fe] {\r\n   \r\n    background: #89aede;\n}\n.bg-purple[data-v-fdb054fe] {\r\n    background: #c7daed;\n}\n.bg-purple-light[data-v-fdb054fe] {\r\n    background: #d2ecf0;\n}\n.grid-content[data-v-fdb054fe] {\r\n    border-radius: 4px;\r\n    min-height: 36px;\n}\n.row-bg[data-v-fdb054fe] {\r\n    padding: 10px 0;\r\n    background-color: #f9fafc;\n}\n.bg-sty[data-v-fdb054fe]{\r\n     height: 30px;\r\n    line-height: 30px;\r\n    text-align: center;\n}\n.money-sty[data-v-fdb054fe]{\r\n    color: rgb(123, 77, 61);\n}\n.btn-size[data-v-fdb054fe]{\r\n    width: 20px;\r\n    height: 20px;\r\n    position: relative;\r\n    \r\n    bottom: 5px;\r\n  border-radius: 50%;\n}\n.btn-size i[data-v-fdb054fe]{\r\n    position: absolute;\r\n    top: 5px;\r\n    left: 5px;\n}\n.text[data-v-fdb054fe] {\r\n    font-size: 14px;\n}\r\n  /* .pagination{\r\n    position: fixed;\r\n    left: 50%;\r\n    transform:translate(-50%,-2vh)\r\n  } */\r\n \r\n",""])}});